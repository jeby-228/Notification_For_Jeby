basePath: /api/v1
definitions:
  controllers.AuthResponse:
    properties:
      token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      user:
        $ref: '#/definitions/controllers.User'
    type: object
  controllers.CreateProviderRequest:
    properties:
      config:
        type: string
      name:
        type: string
      tenants_id:
        type: string
      type:
        $ref: '#/definitions/models.ProviderType'
    required:
    - config
    - name
    - tenants_id
    - type
    type: object
  controllers.LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  controllers.RegisterRequest:
    properties:
      email:
        example: user@example.com
        type: string
      name:
        example: 張三
        type: string
      password:
        example: password123
        minLength: 6
        type: string
    required:
    - email
    - name
    - password
    type: object
  controllers.UpdateProviderRequest:
    properties:
      config:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      type:
        $ref: '#/definitions/models.ProviderType'
    required:
    - config
    - name
    - type
    type: object
  controllers.User:
    properties:
      email:
        example: user@example.com
        type: string
      id:
        example: 1
        type: integer
      name:
        example: 張三
        type: string
    type: object
  models.NotificationProvider:
    properties:
      config:
        type: string
      created_at:
        description: 創建時間
        type: string
      creator_id:
        description: 創建者ID
        type: string
      id:
        description: 主鍵ID
        type: string
      is_active:
        type: boolean
      last_modification_time:
        description: 最後修改時間
        type: string
      last_modifier_id:
        description: 最後修改者ID
        type: string
      name:
        type: string
      sort:
        description: 排序欄位
        type: integer
      tenants_id:
        type: string
      type:
        $ref: '#/definitions/models.ProviderType'
    type: object
  models.ProviderType:
    enum:
    - SMTP
    - SMS
    - FIREBASE
    type: string
    x-enum-varnames:
    - ProviderSMTP
    - ProviderSMS
    - ProviderFirebase
host: localhost:9876
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: 這是一個使用 Go、Gin 框架和 PostgreSQL 構建的 RESTful 和 GraphQL API 服務，提供會員管理功能和
    JWT 認證
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Member API
  version: "1.0"
paths:
  /auth/regenerate-key:
    post:
      consumes:
      - application/json
      description: 重新生成當前用戶的 API Key，舊的 API Key 將失效
      produces:
      - application/json
      responses:
        "200":
          description: 重新生成成功
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 重新生成 API Key
      tags:
      - 認證
  /auth/verify-key:
    get:
      consumes:
      - application/json
      description: 驗證提供的 API Key 是否有效並返回會員資訊
      parameters:
      - description: API Key
        in: header
        name: X-API-Key
        type: string
      - description: 'API Key (格式: ApiKey {key})'
        in: header
        name: Authorization
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: API Key 有效
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 無效的 API Key
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 驗證 API Key 是否有效
      tags:
      - 認證
  /health:
    get:
      consumes:
      - application/json
      description: 檢查服務器狀態和數據庫連接狀態
      produces:
      - application/json
      responses:
        "200":
          description: 服務正常
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 健康檢查
      tags:
      - 系統
  /login:
    post:
      consumes:
      - application/json
      description: 用戶登入，驗證郵件和密碼後返回 JWT token 和用戶信息
      parameters:
      - description: 登入信息
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/controllers.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登入成功
          schema:
            $ref: '#/definitions/controllers.AuthResponse'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 電子郵件或密碼錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用戶登入
      tags:
      - 認證
  /profile:
    get:
      consumes:
      - application/json
      description: 獲取當前登入用戶的詳細信息，需要 JWT 認證
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              $ref: '#/definitions/controllers.User'
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 用戶不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 獲取當前用戶信息
      tags:
      - 用戶
  /providers:
    get:
      consumes:
      - application/json
      description: 取得指定租戶的所有通知提供者配置，需要 JWT 認證
      parameters:
      - description: 租戶 ID
        in: query
        name: tenants_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 取得成功
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/models.NotificationProvider'
              type: array
            type: object
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得租戶的所有提供者
      tags:
      - 通知提供者
    post:
      consumes:
      - application/json
      description: 建立新的通知提供者配置，需要 JWT 認證
      parameters:
      - description: 提供者配置
        in: body
        name: provider
        required: true
        schema:
          $ref: '#/definitions/controllers.CreateProviderRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 建立成功
          schema:
            $ref: '#/definitions/models.NotificationProvider'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 建立通知提供者
      tags:
      - 通知提供者
  /providers/{id}:
    delete:
      consumes:
      - application/json
      description: 刪除指定 ID 的通知提供者配置，需要 JWT 認證
      parameters:
      - description: 提供者 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 刪除成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 提供者不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 刪除提供者
      tags:
      - 通知提供者
    get:
      consumes:
      - application/json
      description: 取得指定 ID 的通知提供者配置，需要 JWT 認證
      parameters:
      - description: 提供者 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 取得成功
          schema:
            $ref: '#/definitions/models.NotificationProvider'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 提供者不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得單一提供者
      tags:
      - 通知提供者
    put:
      consumes:
      - application/json
      description: 更新指定 ID 的通知提供者配置，需要 JWT 認證
      parameters:
      - description: 提供者 ID
        in: path
        name: id
        required: true
        type: string
      - description: 提供者配置
        in: body
        name: provider
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateProviderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            $ref: '#/definitions/models.NotificationProvider'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 提供者不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 更新提供者
      tags:
      - 通知提供者
  /providers/{id}/test:
    get:
      consumes:
      - application/json
      description: 測試指定 ID 的通知提供者配置是否有效，需要 JWT 認證
      parameters:
      - description: 提供者 ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 測試結果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 提供者不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 測試提供者配置
      tags:
      - 通知提供者
  /register:
    post:
      consumes:
      - application/json
      description: 註冊新用戶，返回 JWT token 和用戶信息
      parameters:
      - description: 註冊信息
        in: body
        name: register
        required: true
        schema:
          $ref: '#/definitions/controllers.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 註冊成功
          schema:
            $ref: '#/definitions/controllers.AuthResponse'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 該電子郵件已被註冊
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用戶註冊
      tags:
      - 認證
  /user/{id}:
    delete:
      consumes:
      - application/json
      description: 根據會員 ID 刪除會員，需要 JWT 認證
      parameters:
      - description: 會員 ID
        example: 1
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 刪除成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 無效的會員 ID
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 刪除會員
      tags:
      - 用戶
    get:
      consumes:
      - application/json
      description: 根據會員 ID 獲取單個會員的詳細信息，需要 JWT 認證
      parameters:
      - description: 會員 ID
        example: 1
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              $ref: '#/definitions/controllers.User'
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 會員不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 根據 ID 獲取會員
      tags:
      - 用戶
  /users:
    get:
      consumes:
      - application/json
      description: 獲取會員列表，最多返回 50 條記錄，需要 JWT 認證
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/controllers.User'
              type: array
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 獲取所有會員
      tags:
      - 用戶
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: JWT 認證，格式：Bearer {token}
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
