basePath: /api/v1
definitions:
  controllers.AuthResponse:
    properties:
      token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      user:
        $ref: '#/definitions/controllers.User'
    type: object
  controllers.LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  controllers.RegisterRequest:
    properties:
      email:
        example: user@example.com
        type: string
      name:
        example: 張三
        type: string
      password:
        example: password123
        minLength: 6
        type: string
    required:
    - email
    - name
    - password
    type: object
  controllers.SendSMSRequest:
    properties:
      body:
        example: 您的驗證碼是 123456
        type: string
      provider_id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      recipient_phone:
        example: "+886912345678"
        type: string
    required:
    - body
    - provider_id
    - recipient_phone
    type: object
  controllers.SendSMSResponse:
    properties:
      log:
        $ref: '#/definitions/models.NotificationLog'
      message:
        example: 簡訊發送成功
        type: string
      success:
        example: true
        type: boolean
    type: object
  controllers.User:
    properties:
      email:
        example: user@example.com
        type: string
      id:
        example: 1
        type: integer
      name:
        example: 張三
        type: string
    type: object
  models.NotificationLog:
    properties:
      body:
        type: string
      created_at:
        description: 創建時間
        type: string
      creator_id:
        description: 創建者ID
        type: string
      error_msg:
        type: string
      id:
        description: 主鍵ID
        type: string
      last_modification_time:
        description: 最後修改時間
        type: string
      last_modifier_id:
        description: 最後修改者ID
        type: string
      member_id:
        type: string
      provider_id:
        type: string
      recipient_email:
        type: string
      recipient_name:
        type: string
      recipient_phone:
        type: string
      sent_at:
        type: string
      sort:
        description: 排序欄位
        type: integer
      status:
        $ref: '#/definitions/models.NotificationStatus'
      subject:
        type: string
      type:
        $ref: '#/definitions/models.ProviderType'
    type: object
  models.NotificationStatus:
    enum:
    - PENDING
    - SENT
    - FAILED
    type: string
    x-enum-varnames:
    - StatusPending
    - StatusSent
    - StatusFailed
  models.ProviderType:
    enum:
    - SMTP
    - SMS
    - FIREBASE
    type: string
    x-enum-varnames:
    - ProviderSMTP
    - ProviderSMS
    - ProviderFirebase
host: localhost:9876
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: 這是一個使用 Go、Gin 框架和 PostgreSQL 構建的 RESTful 和 GraphQL API 服務，提供會員管理功能和
    JWT 認證
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Member API
  version: "1.0"
paths:
  /auth/regenerate-key:
    post:
      consumes:
      - application/json
      description: 重新生成當前用戶的 API Key，舊的 API Key 將失效
      produces:
      - application/json
      responses:
        "200":
          description: 重新生成成功
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 重新生成 API Key
      tags:
      - 認證
  /auth/verify-key:
    get:
      consumes:
      - application/json
      description: 驗證提供的 API Key 是否有效並返回會員資訊
      parameters:
      - description: API Key
        in: header
        name: X-API-Key
        type: string
      - description: 'API Key (格式: ApiKey {key})'
        in: header
        name: Authorization
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: API Key 有效
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 無效的 API Key
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 驗證 API Key 是否有效
      tags:
      - 認證
  /health:
    get:
      consumes:
      - application/json
      description: 檢查服務器狀態和數據庫連接狀態
      produces:
      - application/json
      responses:
        "200":
          description: 服務正常
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 健康檢查
      tags:
      - 系統
  /login:
    post:
      consumes:
      - application/json
      description: 用戶登入，驗證郵件和密碼後返回 JWT token 和用戶信息
      parameters:
      - description: 登入信息
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/controllers.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登入成功
          schema:
            $ref: '#/definitions/controllers.AuthResponse'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 電子郵件或密碼錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用戶登入
      tags:
      - 認證
  /notifications/sms:
    post:
      consumes:
      - application/json
      description: 發送簡訊通知到指定電話號碼
      parameters:
      - description: 發送簡訊請求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controllers.SendSMSRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 發送成功
          schema:
            $ref: '#/definitions/controllers.SendSMSResponse'
        "400":
          description: 參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未授權
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 發送失敗
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - ApiKeyAuth: []
      summary: 發送簡訊
      tags:
      - 通知
  /profile:
    get:
      consumes:
      - application/json
      description: 獲取當前登入用戶的詳細信息，需要 JWT 認證
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              $ref: '#/definitions/controllers.User'
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 用戶不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 獲取當前用戶信息
      tags:
      - 用戶
  /register:
    post:
      consumes:
      - application/json
      description: 註冊新用戶，返回 JWT token 和用戶信息
      parameters:
      - description: 註冊信息
        in: body
        name: register
        required: true
        schema:
          $ref: '#/definitions/controllers.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 註冊成功
          schema:
            $ref: '#/definitions/controllers.AuthResponse'
        "400":
          description: 請求參數錯誤
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 該電子郵件已被註冊
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 用戶註冊
      tags:
      - 認證
  /user/{id}:
    delete:
      consumes:
      - application/json
      description: 根據會員 ID 刪除會員，需要 JWT 認證
      parameters:
      - description: 會員 ID
        example: 1
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 刪除成功
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 無效的會員 ID
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 刪除會員
      tags:
      - 用戶
    get:
      consumes:
      - application/json
      description: 根據會員 ID 獲取單個會員的詳細信息，需要 JWT 認證
      parameters:
      - description: 會員 ID
        example: 1
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              $ref: '#/definitions/controllers.User'
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 會員不存在
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 根據 ID 獲取會員
      tags:
      - 用戶
  /users:
    get:
      consumes:
      - application/json
      description: 獲取會員列表，最多返回 50 條記錄，需要 JWT 認證
      produces:
      - application/json
      responses:
        "200":
          description: 獲取成功
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/controllers.User'
              type: array
            type: object
        "401":
          description: 未認證
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 服務器錯誤
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 獲取所有會員
      tags:
      - 用戶
schemes:
- http
- https
securityDefinitions:
  ApiKeyAuth:
    description: API Key 認證
    in: header
    name: X-API-Key
    type: apiKey
  BearerAuth:
    description: JWT 認證，格式：Bearer {token}
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
